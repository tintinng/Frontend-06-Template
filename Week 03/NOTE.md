学习笔记
## 概要
本周跟着老师做了一个简单的四则运算规则的LL语法分析器，最终实现一个基于四则运算的从字符串到抽象语法树的过程。其实也就是实现了小范围内编译过程中词法分析和语法分析的过程，课程内容平时项目不太会用，只能结合编译原理的步骤和课程内容简单总结一下。

整个编译过程分为以下六个步骤：

``` 词法分析 => 语法分析 => 语义分析 => 生成中间代码 => 优化 => 生成目标代码 ```

每一个步骤都会有对应一个产出，本周课程实现了基于四则运算的词法分析和语法分析，分别产出了一组Token和四则运算的抽象语法树AST，下面就来具体看一下这两个过程。
## 词法分析
词法分析的工作就是将较长的字符串分割成Token的过程，那具体是如何进行分割的呢？通过查阅资料，发现主要有以下两个过程：
### 1、通过词法规则构造有限自动机
通过词法规则构造有限自动机首先要确定词法规则，四则运算的词法包括数字和加减乘除，当然也有可能包括空白符和换行符等。每一种词法对应的词法规则都对应一个捕获组，用一个包含对应捕获组的正则表达式来描述词法规则。

课程没有构造出完全正确的有限自动机，四则运算可以是以上各种词法的任意组合，比如：加号后面是乘号也可以被解析。虽然组合不一定可以得到计算结果，但是可以方便地覆盖正确情况。
### 2、从有限自动机中解析出Token
通过设置正则表达式为全局模式，利用exec()方法循环地匹配字符串直到结束，最后再加上一个结束符Token。最终得到的就是一组四则运算词法Token。
## 语法分析
语法分析的结果是生成AST抽象语法树，通过产生式规则用终结符替换非终结符的过程，最终AST的叶子节点都是终结符。
### 1、确定语法规则
四则运算的语法规则主要包括加法和乘法两种运算（减法可以看成加法，除法可以看成乘法），乘法的运算优先级高于加法，因此在形成AST节点的时候乘法被优先计算。
根据课堂内容，对应乘法和除法的产生式规则：
```javascript
<MultiplicationExpression> ::= 
<Number>
|<MultiplicationExpression><*><Number>
|<MultiplicationExpression></><Number>
```
```javascript 
<AdditiveExpression> ::= 
<Number>
|<MultiplicationExpression><*><Number> 
|<MultiplicationExpression></><Number> 
|<AdditiveExpression><+><MultiplicationExpression> 
|<AdditiveExpression><-><MultiplicationExpression> 
```  
### 2、LL语法分析
LL语法分析是自顶向下算法的一种，第一个L代表从左到右处理，第二个L代表从左到右进行规约。当左边的非终结符被完全替换完成才会替换右边的。在四则运算表达式中，如果遇到加法表达式，则会用加法规则去匹配，不仅会嵌套乘法规则，还会递归地去匹配，最终生成AST对象.